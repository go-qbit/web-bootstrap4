package bsform

import (
	"context"
	"github.com/go-qbit/template/filter"
	"github.com/go-qbit/template/utils"
	"github.com/go-qbit/web-bootstrap4/template"
	"github.com/go-qbit/web/form"
	"io"
)

var (
	s3e05d869e0bad79eb2a7884a4659472a = []byte{0x3C, 0x2F, 0x62, 0x75, 0x74, 0x74, 0x6F, 0x6E, 0x3E}
	s2b04fb8506e463b412e434720a53c2f8 = []byte{0x3C, 0x2F, 0x64, 0x69, 0x76, 0x3E}
	sb7cefdc2307174f5ebba324e57d82d99 = []byte{0x3C, 0x2F, 0x66, 0x6F, 0x72, 0x6D, 0x3E}
	s9a7c7490ff6e47d81db96f2a407dd9cb = []byte{0x3C, 0x2F, 0x68, 0x31, 0x3E}
	s4e2890a54fed380c0cd06046b7befb6b = []byte{0x3C, 0x62, 0x75, 0x74, 0x74, 0x6F, 0x6E, 0x20, 0x74, 0x79, 0x70, 0x65, 0x3D, 0x22, 0x73, 0x75, 0x62, 0x6D, 0x69, 0x74, 0x22, 0x20, 0x63, 0x6C, 0x61, 0x73, 0x73, 0x3D, 0x22, 0x62, 0x74, 0x6E, 0x20, 0x62, 0x74, 0x6E, 0x2D, 0x70, 0x72, 0x69, 0x6D, 0x61, 0x72, 0x79, 0x20, 0x62, 0x74, 0x6E, 0x2D, 0x62,
		0x6C, 0x6F, 0x63, 0x6B, 0x22, 0x3E}
	sded70d450640180bda5f6fe41d778d74 = []byte{0x3C, 0x64, 0x69, 0x76, 0x20, 0x63, 0x6C, 0x61, 0x73, 0x73, 0x3D, 0x22, 0x61, 0x6C, 0x65, 0x72, 0x74, 0x20, 0x61, 0x6C, 0x65, 0x72, 0x74, 0x2D, 0x64, 0x61, 0x6E, 0x67, 0x65, 0x72, 0x22, 0x3E}
	s87b6625ab979a6128a81cee765a2e653 = []byte{0x3C, 0x64, 0x69, 0x76, 0x20, 0x63, 0x6C, 0x61, 0x73, 0x73, 0x3D, 0x22, 0x63, 0x61, 0x72, 0x64, 0x20, 0x63, 0x61, 0x72, 0x64, 0x2D, 0x62, 0x6F, 0x64, 0x79, 0x22, 0x3E}
	sa1e82922ccb86fae49a39f78f51e8b75 = []byte{0x3C, 0x64, 0x69, 0x76, 0x20, 0x63, 0x6C, 0x61, 0x73, 0x73, 0x3D, 0x22, 0x63, 0x6F, 0x6C, 0x2D, 0x38, 0x20, 0x6F, 0x66, 0x66, 0x73, 0x65, 0x74, 0x2D, 0x32, 0x22, 0x3E}
	sf80b12f9062da20fbbe9990a7f623f74 = []byte{0x3C, 0x64, 0x69, 0x76, 0x20, 0x63, 0x6C, 0x61, 0x73, 0x73, 0x3D, 0x22, 0x63, 0x6F, 0x6E, 0x74, 0x61, 0x69, 0x6E, 0x65, 0x72, 0x20, 0x70, 0x74, 0x2D, 0x34, 0x22, 0x3E}
	s5250dcfcb423e6d16c8e13c793f372f7 = []byte{0x3C, 0x64, 0x69, 0x76, 0x20, 0x63, 0x6C, 0x61, 0x73, 0x73, 0x3D, 0x22, 0x72, 0x6F, 0x77, 0x22, 0x3E}
	s4dfd8e12cd0dc6be157aecbec4b2ee68 = []byte{0x3C, 0x66, 0x6F, 0x72, 0x6D, 0x20, 0x6D, 0x65, 0x74, 0x68, 0x6F, 0x64, 0x3D, 0x22, 0x70, 0x6F, 0x73, 0x74, 0x22, 0x3E}
	s34a0fa5008e84fe746ed49dfc81e0f5a = []byte{0x3C, 0x68, 0x31, 0x20, 0x63, 0x6C, 0x61, 0x73, 0x73, 0x3D, 0x22, 0x68, 0x33, 0x20, 0x6D, 0x62, 0x2D, 0x33, 0x22, 0x3E}
	s3c1a3876687f59915da4f71996abe263 = []byte{0x3C, 0x69, 0x6E, 0x70, 0x75, 0x74, 0x20, 0x74, 0x79, 0x70, 0x65, 0x3D, 0x22, 0x68, 0x69, 0x64, 0x64, 0x65, 0x6E, 0x22, 0x20, 0x6E, 0x61, 0x6D, 0x65, 0x3D, 0x22}
	s9b4daa4cb64cb1f1bd6fe7b7ddb212ad = []byte{0x22, 0x20, 0x76, 0x61, 0x6C, 0x75, 0x65, 0x3D, 0x22}
	s4c8bb8e043c33dbb83ac4b0b8d1fd5da = []byte{0x22, 0x3E}
)

func ProcessForm(ctx context.Context, w io.Writer, f *form.Form) {
	w.Write(s4dfd8e12cd0dc6be157aecbec4b2ee68)
	caption := f.GetCaption(ctx)
	if caption != "" {
		w.Write(s34a0fa5008e84fe746ed49dfc81e0f5a)
		io.WriteString(w, filter.Filterhtml(caption))
		w.Write(s9a7c7490ff6e47d81db96f2a407dd9cb)
	}
	if f.LastError != nil {
		w.Write(sded70d450640180bda5f6fe41d778d74)
		io.WriteString(w, utils.ToString(f.LastError.PublicError()))
		w.Write(s2b04fb8506e463b412e434720a53c2f8)
	}
	w.Write(s3c1a3876687f59915da4f71996abe263)
	io.WriteString(w, utils.ToString(form.AntiCSRFInputName))
	w.Write(s9b4daa4cb64cb1f1bd6fe7b7ddb212ad)
	io.WriteString(w, utils.ToString(f.GetAntiCSRFToken(ctx)))
	w.Write(s4c8bb8e043c33dbb83ac4b0b8d1fd5da)
	for _, field := range f.GetFields() {
		field.ProcessHtml(ctx, w)
	}
	w.Write(s4e2890a54fed380c0cd06046b7befb6b)
	io.WriteString(w, filter.Filterhtml(f.GetSubmitCaption(ctx)))
	w.Write(s3e05d869e0bad79eb2a7884a4659472a)
	w.Write(sb7cefdc2307174f5ebba324e57d82d99)
}

func WrapperFormWrapper(ctx context.Context, w io.Writer, tplClbF func()) {
	w.Write(sf80b12f9062da20fbbe9990a7f623f74)
	w.Write(s5250dcfcb423e6d16c8e13c793f372f7)
	w.Write(sa1e82922ccb86fae49a39f78f51e8b75)
	w.Write(s87b6625ab979a6128a81cee765a2e653)
	tplClbF()
	w.Write(s2b04fb8506e463b412e434720a53c2f8)
	w.Write(s2b04fb8506e463b412e434720a53c2f8)
	w.Write(s2b04fb8506e463b412e434720a53c2f8)
	w.Write(s2b04fb8506e463b412e434720a53c2f8)
}

func ProcessWrappedForm(ctx context.Context, w io.Writer, f *form.Form) {
	WrapperFormWrapper(ctx, w, func() {
		ProcessForm(ctx, w, f)
	})
}

func ProcessPageForm(ctx context.Context, w io.Writer, f *form.Form) {
	template.WrapperPage(ctx, w, func() {
		ProcessWrappedForm(ctx, w, f)
	})
}
